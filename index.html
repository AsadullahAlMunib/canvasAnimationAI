<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Drone & Coding Animation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00b4db, #0083b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 180, 219, 0.5);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .animation-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        @media (max-width: 768px) {
            .animation-container {
                grid-template-columns: 1fr;
            }
        }

        .canvas-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .canvas-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #00b4db;
        }

        canvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(45deg, #00b4db, #0083b0);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 180, 219, 0.4);
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-panel h3 {
            color: #00b4db;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .code-display {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #00b4db;
        }

        .tech-stack {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .tech-item {
            background: rgba(0, 180, 219, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            border: 1px solid rgba(0, 180, 219, 0.3);
            text-align: center;
            transition: all 0.3s ease;
        }

        .tech-item:hover {
            transform: translateY(-5px);
            background: rgba(0, 180, 219, 0.2);
            box-shadow: 0 10px 20px rgba(0, 180, 219, 0.2);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff88;
            margin-right: 10px;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>3D Drone & Coding Animation</h1>
            <p>Interactive 3D visualization of drone technology and real-time coding simulation</p>
        </div>

        <div class="animation-container">
            <div class="canvas-section">
                <h2 class="canvas-title">üöÅ 3D Drone Simulation</h2>
                <canvas id="droneCanvas"></canvas>
                <div class="controls">
                    <button class="control-btn" onclick="takeoff()">Take Off</button>
                    <button class="control-btn" onclick="land()">Land</button>
                    <button class="control-btn" onclick="rotateView()">Rotate View</button>
                    <button class="control-btn" onclick="togglePropellers()">Toggle Propellers</button>
                </div>
            </div>

            <div class="canvas-section">
                <h2 class="canvas-title">üíª Code Visualization</h2>
                <canvas id="codeCanvas"></canvas>
                <div class="controls">
                    <button class="control-btn" onclick="startCoding()">Start Coding</button>
                    <button class="control-btn" onclick="debugCode()">Debug</button>
                    <button class="control-btn" onclick="optimize()">Optimize</button>
                    <button class="control-btn" onclick="resetCode()">Reset</button>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <h3><span class="status-indicator"></span> System Status</h3>
            <div class="code-display">
                <div id="statusText">System Ready - Drone: IDLE | Code: WAITING</div>
                <div id="codeOutput" style="margin-top: 10px; color: #00ff88;"></div>
            </div>
        </div>

        <div class="tech-stack">
            <div class="tech-item pulse">
                <h4>HTML5 Canvas</h4>
                <p>2D & 3D Rendering</p>
            </div>
            <div class="tech-item pulse">
                <h4>JavaScript</h4>
                <p>Real-time Animation</p>
            </div>
            <div class="tech-item pulse">
                <h4>WebGL</h4>
                <p>3D Graphics</p>
            </div>
            <div class="tech-item pulse">
                <h4>Physics Engine</h4>
                <p>Realistic Motion</p>
            </div>
        </div>
    </div>

    <script>
        // Drone Canvas
        const droneCanvas = document.getElementById('droneCanvas');
        const droneCtx = droneCanvas.getContext('2d');
        
        // Code Canvas
        const codeCanvas = document.getElementById('codeCanvas');
        const codeCtx = codeCanvas.getContext('2d');

        // Set canvas dimensions
        function setupCanvases() {
            droneCanvas.width = droneCanvas.offsetWidth;
            droneCanvas.height = droneCanvas.offsetHeight;
            codeCanvas.width = codeCanvas.offsetWidth;
            codeCanvas.height = codeCanvas.offsetHeight;
        }

        // Drone variables
        let droneState = {
            x: 0,
            y: 0,
            rotation: 0,
            altitude: 0,
            propellers: false,
            isFlying: false,
            cameraAngle: 0
        };

        // Code animation variables
        let codeState = {
            lines: [],
            currentLine: 0,
            isCoding: false,
            particles: [],
            bugs: []
        };

        // Initialize
        setupCanvases();
        window.addEventListener('resize', setupCanvases);

        // Drone drawing functions
        function drawDrone() {
            droneCtx.clearRect(0, 0, droneCanvas.width, droneCanvas.height);
            
            // Draw background grid
            drawGrid();
            
            // Draw ground
            drawGround();
            
            // Draw drone body
            drawDroneBody();
            
            // Draw propellers
            drawPropellers();
            
            // Draw status info
            drawDroneStatus();
        }

        function drawGrid() {
            droneCtx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            droneCtx.lineWidth = 1;
            
            const gridSize = 50;
            for (let x = 0; x < droneCanvas.width; x += gridSize) {
                droneCtx.beginPath();
                droneCtx.moveTo(x, 0);
                droneCtx.lineTo(x, droneCanvas.height);
                droneCtx.stroke();
            }
            
            for (let y = 0; y < droneCanvas.height; y += gridSize) {
                droneCtx.beginPath();
                droneCtx.moveTo(0, y);
                droneCtx.lineTo(droneCanvas.width, y);
                droneCtx.stroke();
            }
        }

        function drawGround() {
            const groundY = droneCanvas.height * 0.7 + droneState.altitude;
            
            // Ground shadow
            droneCtx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            droneCtx.fillRect(0, groundY, droneCanvas.width, droneCanvas.height - groundY);
            
            // Ground texture
            droneCtx.fillStyle = 'rgba(50, 50, 50, 0.8)';
            for (let i = 0; i < droneCanvas.width; i += 20) {
                droneCtx.fillRect(i, groundY, 10, 5);
            }
        }

        function drawDroneBody() {
            const centerX = droneCanvas.width / 2 + droneState.x;
            const centerY = droneCanvas.height * 0.4 - droneState.altitude;
            
            // Drone main body
            droneCtx.save();
            droneCtx.translate(centerX, centerY);
            droneCtx.rotate(droneState.rotation + droneState.cameraAngle);
            
            // Central hub
            droneCtx.fillStyle = '#333';
            droneCtx.fillRect(-30, -15, 60, 30);
            
            // Arms
            droneCtx.strokeStyle = '#555';
            droneCtx.lineWidth = 8;
            
            // Four arms
            droneCtx.beginPath();
            droneCtx.moveTo(-20, -10);
            droneCtx.lineTo(-80, -60);
            droneCtx.stroke();
            
            droneCtx.beginPath();
            droneCtx.moveTo(20, -10);
            droneCtx.lineTo(80, -60);
            droneCtx.stroke();
            
            droneCtx.beginPath();
            droneCtx.moveTo(-20, 10);
            droneCtx.lineTo(-80, 60);
            droneCtx.stroke();
            
            droneCtx.beginPath();
            droneCtx.moveTo(20, 10);
            droneCtx.lineTo(80, 60);
            droneCtx.stroke();
            
            droneCtx.restore();
        }

        function drawPropellers() {
            const centerX = droneCanvas.width / 2 + droneState.x;
            const centerY = droneCanvas.height * 0.4 - droneState.altitude;
            
            droneCtx.save();
            droneCtx.translate(centerX, centerY);
            droneCtx.rotate(droneState.rotation + droneState.cameraAngle);
            
            const propellerOffsets = [
                { x: -80, y: -60 },
                { x: 80, y: -60 },
                { x: -80, y: 60 },
                { x: 80, y: 60 }
            ];
            
            propellerOffsets.forEach(offset => {
                // Propeller base
                droneCtx.fillStyle = '#666';
                droneCtx.fillRect(offset.x - 5, offset.y - 5, 10, 10);
                
                if (droneState.propellers) {
                    // Spinning propellers
                    const spinAngle = Date.now() * 0.01;
                    
                    droneCtx.save();
                    droneCtx.translate(offset.x, offset.y);
                    droneCtx.rotate(spinAngle);
                    
                    // Propeller blades
                    droneCtx.strokeStyle = '#00b4db';
                    droneCtx.lineWidth = 3;
                    
                    for (let i = 0; i < 4; i++) {
                        droneCtx.rotate(Math.PI / 2);
                        droneCtx.beginPath();
                        droneCtx.moveTo(0, 0);
                        droneCtx.lineTo(25, 0);
                        droneCtx.stroke();
                    }
                    
                    // Motion blur effect
                    droneCtx.globalAlpha = 0.3;
                    droneCtx.strokeStyle = '#0083b0';
                    for (let i = 0; i < 4; i++) {
                        droneCtx.rotate(Math.PI / 2);
                        droneCtx.beginPath();
                        droneCtx.moveTo(0, 0);
                        droneCtx.lineTo(35, 0);
                        droneCtx.stroke();
                    }
                    
                    droneCtx.restore();
                } else {
                    // Static propellers
                    droneCtx.strokeStyle = '#444';
                    droneCtx.lineWidth = 2;
                    
                    droneCtx.save();
                    droneCtx.translate(offset.x, offset.y);
                    
                    for (let i = 0; i < 4; i++) {
                        droneCtx.rotate(Math.PI / 2);
                        droneCtx.beginPath();
                        droneCtx.moveTo(0, 0);
                        droneCtx.lineTo(20, 0);
                        droneCtx.stroke();
                    }
                    
                    droneCtx.restore();
                }
            });
            
            droneCtx.restore();
        }

        function drawDroneStatus() {
            droneCtx.fillStyle = 'white';
            droneCtx.font = '14px Arial';
            droneCtx.fillText(`Altitude: ${Math.round(droneState.altitude)}m`, 20, 30);
            droneCtx.fillText(`Rotation: ${Math.round(droneState.rotation * 180 / Math.PI)}¬∞`, 20, 50);
            droneCtx.fillText(`Status: ${droneState.isFlying ? 'FLYING' : 'GROUNDED'}`, 20, 70);
            droneCtx.fillText(`Propellers: ${droneState.propellers ? 'ON' : 'OFF'}`, 20, 90);
        }

        // Code animation functions
        function drawCode() {
            codeCtx.clearRect(0, 0, codeCanvas.width, codeCanvas.height);
            
            // Draw code editor background
            drawCodeEditor();
            
            // Draw code lines
            drawCodeLines();
            
            // Draw active line highlight
            drawActiveLine();
            
            // Draw particles
            drawParticles();
            
            // Draw bugs
            drawBugs();
        }

        function drawCodeEditor() {
            // Editor background
            codeCtx.fillStyle = '#1e1e1e';
            codeCtx.fillRect(0, 0, codeCanvas.width, codeCanvas.height);
            
            // Line numbers
            codeCtx.fillStyle = '#6e7681';
            codeCtx.font = '14px "Courier New"';
            for (let i = 1; i <= 20; i++) {
                codeCtx.fillText(i.toString().padStart(2, ' '), 10, i * 20 + 10);
            }
            
            // Cursor
            const cursorX = 60 + Math.sin(Date.now() * 0.01) * 5;
            const cursorY = (codeState.currentLine + 1) * 20 + 5;
            codeCtx.fillStyle = '#00ff88';
            codeCtx.fillRect(cursorX, cursorY, 2, 15);
        }

        function drawCodeLines() {
            const lines = [
                "function droneController() {",
                "  // Initialize drone systems",
                "  const motors = new MotorSystem();",
                "  const sensors = new SensorArray();",
                "  const nav = new Navigation();",
                "",
                "  async function takeoff() {",
                "    await motors.arm();",
                "    sensors.calibrate();",
                "    return nav.ascend(100);",
                "  }",
                "",
                "  function stabilize() {",
                "    const pitch = sensors.getPitch();",
                "    const roll = sensors.getRoll();",
                "    return PID.calculate(pitch, roll);",
                "  }",
                "",
                "  // Main control loop",
                "  setInterval(() => {",
                "    const correction = stabilize();",
                "    motors.adjust(correction);",
                "  }, 16);",
                "}"
            ];
            
            codeCtx.font = '14px "Courier New"';
            lines.forEach((line, index) => {
                const y = (index + 1) * 20 + 10;
                
                if (line.includes('function') || line.includes('class')) {
                    codeCtx.fillStyle = '#569cd6';
                } else if (line.includes('//')) {
                    codeCtx.fillStyle = '#6a9955';
                } else if (line.includes('const') || line.includes('let') || line.includes('var')) {
                    codeCtx.fillStyle = '#9cdcfe';
                } else if (line.includes('await') || line.includes('async')) {
                    codeCtx.fillStyle = '#c586c0';
                } else {
                    codeCtx.fillStyle = '#d4d4d4';
                }
                
                codeCtx.fillText(line, 40, y);
            });
        }

        function drawActiveLine() {
            if (codeState.isCoding) {
                const y = (codeState.currentLine + 1) * 20;
                codeCtx.fillStyle = 'rgba(0, 180, 219, 0.2)';
                codeCtx.fillRect(0, y, codeCanvas.width, 20);
            }
        }

        function drawParticles() {
            codeState.particles.forEach((particle, index) => {
                codeCtx.fillStyle = particle.color;
                codeCtx.beginPath();
                codeCtx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                codeCtx.fill();
                
                // Update particle
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.size *= 0.95;
                
                // Remove dead particles
                if (particle.size < 0.5) {
                    codeState.particles.splice(index, 1);
                }
            });
        }

        function drawBugs() {
            codeState.bugs.forEach((bug, index) => {
                codeCtx.fillStyle = bug.color;
                codeCtx.beginPath();
                codeCtx.arc(bug.x, bug.y, 3, 0, Math.PI * 2);
                codeCtx.fill();
                
                // Draw bug legs
                for (let i = 0; i < 6; i++) {
                    const angle = (i * Math.PI / 3) + Date.now() * 0.01;
                    codeCtx.beginPath();
                    codeCtx.moveTo(bug.x, bug.y);
                    codeCtx.lineTo(
                        bug.x + Math.cos(angle) * 8,
                        bug.y + Math.sin(angle) * 8
                    );
                    codeCtx.strokeStyle = bug.color;
                    codeCtx.lineWidth = 1;
                    codeCtx.stroke();
                }
                
                // Update bug position
                bug.x += Math.sin(Date.now() * 0.001 + index) * 2;
                bug.y += Math.cos(Date.now() * 0.001 + index) * 2;
                
                // Keep bugs in canvas
                if (bug.x < 0 || bug.x > codeCanvas.width) bug.vx *= -1;
                if (bug.y < 0 || bug.y > codeCanvas.height) bug.vy *= -1;
            });
        }

        // Control functions
        function takeoff() {
            if (!droneState.isFlying) {
                droneState.propellers = true;
                droneState.isFlying = true;
                
                const takeoffInterval = setInterval(() => {
                    droneState.altitude += 2;
                    if (droneState.altitude >= 100) {
                        clearInterval(takeoffInterval);
                    }
                }, 50);
                
                updateStatus("Drone taking off... Systems nominal");
            }
        }

        function land() {
            if (droneState.isFlying) {
                const landInterval = setInterval(() => {
                    droneState.altitude -= 2;
                    if (droneState.altitude <= 0) {
                        droneState.altitude = 0;
                        droneState.propellers = false;
                        droneState.isFlying = false;
                        clearInterval(landInterval);
                    }
                }, 50);
                
                updateStatus("Drone landing... Engaging safety protocols");
            }
        }

        function rotateView() {
            droneState.cameraAngle += Math.PI / 4;
            updateStatus("Camera view rotated");
        }

        function togglePropellers() {
            droneState.propellers = !droneState.propellers;
            updateStatus(`Propellers ${droneState.propellers ? 'activated' : 'deactivated'}`);
        }

        function startCoding() {
            codeState.isCoding = true;
            codeState.currentLine = 0;
            
            const codingInterval = setInterval(() => {
                if (codeState.currentLine < 20) {
                    codeState.currentLine++;
                    
                    // Add typing particles
                    for (let i = 0; i < 5; i++) {
                        codeState.particles.push({
                            x: 60 + Math.random() * 300,
                            y: (codeState.currentLine + 1) * 20 + 5,
                            vx: (Math.random() - 0.5) * 4,
                            vy: (Math.random() - 0.5) * 4,
                            size: Math.random() * 3 + 1,
                            color: '#00b4db'
                        });
                    }
                } else {
                    clearInterval(codingInterval);
                    codeState.isCoding = false;
                    updateStatus("Code compilation complete! No errors found.");
                }
            }, 200);
            
            updateStatus("Starting code compilation...");
        }

        function debugCode() {
            // Add some bugs
            for (let i = 0; i < 5; i++) {
                codeState.bugs.push({
                    x: Math.random() * codeCanvas.width,
                    y: Math.random() * codeCanvas.height,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    color: '#ff4444'
                });
            }
            
            updateStatus("Debug mode activated - Bugs detected in code!");
        }

        function optimize() {
            // Clear bugs and add optimization particles
            codeState.bugs = [];
            for (let i = 0; i < 20; i++) {
                codeState.particles.push({
                    x: Math.random() * codeCanvas.width,
                    y: Math.random() * codeCanvas.height,
                    vx: (Math.random() - 0.5) * 6,
                    vy: (Math.random() - 0.5) * 6,
                    size: Math.random() * 4 + 2,
                    color: '#00ff88'
                });
            }
            
            updateStatus("Code optimization in progress... Performance improved!");
        }

        function resetCode() {
            codeState.currentLine = 0;
            codeState.particles = [];
            codeState.bugs = [];
            codeState.isCoding = false;
            updateStatus("Code editor reset to initial state");
        }

        function updateStatus(message) {
            document.getElementById('statusText').textContent = message;
        }

        // Animation loop
        function animate() {
            drawDrone();
            drawCode();
            
            // Add some random movement when flying
            if (droneState.isFlying) {
                droneState.x = Math.sin(Date.now() * 0.001) * 20;
                droneState.y = Math.cos(Date.now() * 0.002) * 10;
                droneState.rotation = Math.sin(Date.now() * 0.0005) * 0.1;
            }
            
            requestAnimationFrame(animate);
        }

        // Start animation
        animate();

        // Initialize with some particles
        for (let i = 0; i < 10; i++) {
            codeState.particles.push({
                x: Math.random() * codeCanvas.width,
                y: Math.random() * codeCanvas.height,
                vx: (Math.random() - 0.5) * 2,
                vy: (Math.random() - 0.5) * 2,
                size: Math.random() * 2 + 1,
                color: '#00b4db'
            });
        }
    </script>
</body>
</html>
